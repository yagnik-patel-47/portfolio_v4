---
import { Icon } from 'astro-icon/components'
import CopyMailButton from './copy-mail'

const socials = [
  {
    label: 'Github',
    href: 'https://github.com/yagnik-patel-47',
    icon: 'github',
  },
  {
    label: 'Bluesky',
    href: 'https://bsky.app/profile/yagnik-pt.bsky.social',
    icon: 'bluesky',
  },
  {
    label: 'X',
    href: 'https://x.com/yagnik_pt',
    icon: 'x',
  },
  {
    label: 'Linkedin',
    href: 'https://linkedin.com/in/yagnikpt',
    icon: 'linkedin',
  },
  {
    label: 'Instagram',
    href: 'https://instagram.com/yagnik._._.patel',
    icon: 'instagram',
  },
]
---

<div
  id="wrapper"
  class="hidden lg:grid top-0 sticky w-full z-20 group bg-white"
  data-expanded="false"
>
  <header
    class="w-full py-4 container mx-auto flex justify-between items-center px-20 group-data-[expanded=false]:translate-y-6 transition bg-white"
    id="header"
  >
    <a href="/" class="text-2xl text-neutral-800 font-serif font-semibold"
      >yagnik.</a
    >
    <nav class="flex items-center gap-6 text-lg text-neutral-800">
      <a class="link transition-[font-variation-settings]" href="/projects"
        >projects</a
      >
      <a class="link transition-[font-variation-settings]" href="/about"
        >about</a
      >
      <a class="link transition-[font-variation-settings]" href="/uibits"
        >ui_bits</a
      >
      <div
        class="flex group/socials -space-x-5 hover:space-x-3 overflow-hidden rounded-full hover:bg-zinc-100 hover:pl-5 hover:pr-2 transition-all"
      >
        {
          socials.map((social) => (
            <a
              target="_blank"
              class="flex items-center gap-1 relative transition-all duration-200 opacity-0 group-hover/socials:opacity-100"
              aria-label={social.label}
              href={social.href}
            >
              <Icon
                title={social.label}
                class="size-5 text-neutral-900"
                name={`social/${social.icon}`}
              />
            </a>
          ))
        }
        <div
          class="size-9 relative flex justify-center items-center group-hover/socials:-mr-9 group-hover/socials:opacity-0 transition-all duration-200"
        >
          <div class="size-3 bg-neutral-800 rounded-full"></div>
          <div
            class="absolute size-3 bg-neutral-800 rounded-full animate-pulse-grow"
          >
          </div>
        </div>
      </div>
      <CopyMailButton client:load />
      <a
        href="https://buymeacoffee.com/yagnik"
        target="_blank"
        aria-label="Buy me a Coffee"
      >
        <Icon
          title="Buy me a Coffee"
          class="size-10 text-neutral-800"
          name="social/buymeacoffee_coloured"
        />
      </a>
    </nav>
  </header>
</div>

<style>
  .link {
    font-variation-settings: 'wght' 500;
  }
  .link:hover {
    font-variation-settings: 'wght' 900;
  }
</style>

<script>
  const isDesktop = window.matchMedia('(width >= 1024px)').matches

  if (isDesktop) {
    const wrapper = document.getElementById('wrapper')

    window.scrollY > 50 && (wrapper.dataset.expanded = 'true')

    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        wrapper.dataset.expanded = 'true'
      } else {
        wrapper.dataset.expanded = 'false'
      }
    })
  }
</script>
