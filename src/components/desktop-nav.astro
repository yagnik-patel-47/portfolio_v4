---
import { Icon } from 'astro-icon/components'
import CopyMailButton from './copy-mail'

const socials = [
  {
    label: 'Twitter',
    href: 'https://x.com/yagnik_pt',
    icon: 'x',
  },
  {
    label: 'Github',
    href: 'https://github.com/yagnik-patel-47',
    icon: 'github',
  },
  {
    label: 'Bluesky',
    href: 'https://bsky.app/profile/yagnik-pt.bsky.social',
    icon: 'bluesky',
  },
  {
    label: 'Linkedin',
    href: 'https://linkedin.com/in/yagnikpt',
    icon: 'linkedin',
  },
  {
    label: 'Instagram',
    href: 'https://instagram.com/yagnik._._.patel',
    icon: 'instagram',
  },
]
---

<div
  id="wrapper"
  class="hidden lg:grid top-0 sticky w-full z-20 bg-white group"
  data-expanded="false"
>
  <header
    class="w-full py-4 container mx-auto flex justify-between items-center px-20 group-data-[expanded=false]:translate-y-6 transition"
    id="header"
  >
    <a href="/" class="text-2xl text-neutral-800 font-inter-tight font-bold">
      Yagnik.
    </a>
    <nav class="flex items-center gap-6 font-medium text-lg text-neutral-800">
      <a
        class="relative after:absolute after:inset-x-0 after:bottom-0.5 after:h-0.5 after:bg-neutral-800 after:scale-x-0 hover:after:scale-x-100 after:transition"
        href="/projects">projects</a
      >
      <a
        class="relative after:absolute after:inset-x-0 after:bottom-0.5 after:h-0.5 after:bg-neutral-800 after:scale-x-0 hover:after:scale-x-100 after:transition"
        href="/about">about</a
      >
      <a
        class="relative after:absolute after:inset-x-0 after:bottom-0.5 after:h-0.5 after:bg-neutral-800 after:scale-x-0 hover:after:scale-x-100 after:transition"
        href="/uibits">ui_bits</a
      >
      <div
        class="flex group/socials -space-x-5 hover:space-x-3 overflow-hidden"
      >
        {
          socials.map((social) => (
            <a
              target="_blank"
              class="flex items-center gap-1 relative transition-all duration-200 opacity-0 group-hover/socials:opacity-100"
              aria-label={social.label}
              href={social.href}
            >
              <Icon
                title={`${social.label} Handle`}
                class="size-5 text-neutral-900"
                name={`social/${social.icon}`}
              />
            </a>
          ))
        }
        <div
          class="size-9 relative flex justify-center items-center group-hover/socials:-mr-9 group-hover/socials:opacity-0 transition-all duration-200"
        >
          <div class="size-3 bg-neutral-800 rounded-full"></div>
          <div
            class="absolute size-3 bg-neutral-800 rounded-full animate-pulse-grow"
          >
          </div>
        </div>
      </div>
      <CopyMailButton client:load />
    </nav>
  </header>
</div>

<script>
  document.addEventListener('astro:page-load', () => {
    const wrapper = document.getElementById('wrapper')

    window.scrollY > 50 && (wrapper.dataset.expanded = 'true')

    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        wrapper.dataset.expanded = 'true'
      } else {
        wrapper.dataset.expanded = 'false'
      }
    })
  })
</script>
